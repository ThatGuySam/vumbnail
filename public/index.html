<!-- http://www.brucelawson.co.uk/2010/a-minimal-html5-document/ -->

<!doctype html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vimeo Thumbnail Server</title>

    <meta name="Description" content="A quick way to get Vimeo Thumbnails with just an ID">

    
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
    
    <!--   Tailwind   -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@1.4.6/dist/base.min.css" /> 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@1.4.6/dist/utilities.min.css" /> 
    
</head>
<body>

    <div
        id="app"
        class="flex items-center flex-col px-6"
    >
        
        <nav
            class="w-full py-8"
            style="max-width: 960px;"
        >
            <ul class="flex">
                <li class="mr-6">
                  <a class="font-bold text-blue-500 hover:text-blue-800" href="/">Vumbnail</a>
                </li>
                <li class="mr-6">
                    <a class="text-blue-500 hover:text-blue-800" href="#responsive-image">Examples</a>
                </li>
                <!-- <li class="mr-6">
                    <a class="text-blue-500 hover:text-blue-800" href="#large-image">Large Example</a>
                </li>
                <li class="mr-6">
                    <a class="text-blue-500 hover:text-blue-800" href="#medium-image">Medium Example</a>
                </li>
                <li class="mr-6">
                    <a class="text-blue-500 hover:text-blue-800" href="#small-image">Small Example</a>
                </li> -->
                <li class="mr-6">
                  <a class="text-blue-500 hover:text-blue-800" href="https://docs.google.com/forms/d/e/1FAIpQLSeFU6f19pAEJMI8yJYOzGIV8y8Sg5NvSnaM6tXz83VtvZeU7Q/viewform?usp=sf_link">Send me updates</a>
                </li>
            </ul>
        </nav>

        <main
            class="w-full py-16"
            style="max-width: 960px;"
        >

            <section class="text-center pb-16">
                A quick way to get Vimeo Thumbnails with just an ID. 
            </section>



            <section class="flex justify-center text-center pb-16">
                <div>

                    <label>
                        <h3 class="pb-3">
                            Enter your Vimeo Video ID
                        </h3>
                        <input
                            v-model="vimeoId"
                            class="border rounded p-3"
                        />
                    </label>

                    <div class="example-videos py-5">
                        <h3 class="pb-3">
                            Example Videos
                        </h3>
                        <div class="button-group px-4">
                            <button
                                v-for="video in exampleVideos"
                                class="bg-transparent hover:bg-gray-500 text-gray-700 font-semibold hover:text-white border border-gray-500 hover:border-transparent rounded py-2 px-4 mx-3"
                                @click="vimeoId = video.id"
                            >{{ video.label }}</button>
                        </div>
                    </div>

                </div>
            </section>
    
    
            <section class="pb-16">
                <div
                    class="pb-16"
                >
                    <h2
                        id="responsive-image"
                        class="text-4xl"
                    >Responsive Image (Recommended)</h2>
                    <h4 class="text-xl pb-4">Let's the browser pick the exact right image for the screen size so it loads as fast as possible. </h4>
                    <div
                        v-html="imageHtml"
                    ></div>

                    <br>

                    <h3 class="text-xl pb-4">Image HTML</h3>
                    <code
                        class="responsive-image-html block bg-gray-300 rounded p-3"
                        style="word-break: break-all;"
                    >
                        {{ imageHtml }}
                    </code>

                    <div class="py-5 -mx-2">

                        <div class="inline p-3 text-blue-800">
                            <button
                                class="copy"
                                data-clipboard-target=".responsive-image-html"
                            >Copy</button>
                        </div>

                    </div>
        
        
                    <br>
                    <br>
                    <br>
                </div>

                <div
                    v-for="item in mappedItems"
                    :key="item.heading"
                    class="pb-16"
                >
                    <h2 class="text-4xl">{{ item.heading }}</h2>
                    <img
                        :src="item.imageSrc"
                        :alt="item.imageAlt"
                    />

                    <br>

                    <h3
                        :id="item.id"
                        class="text-xl pb-4"
                    >Image URL</h3>
                    <code
                        class="block bg-gray-300 rounded p-3"
                        style="word-break: break-all;"
                    >
                        {{ item.imageSrc }}
                    </code>

                    <div class="py-5 -mx-2">

                        <div class="inline p-3 text-blue-800">
                            <button
                                class="copy"
                                :data-clipboard-text="item.imageSrc"
                            >Copy</button>
                        </div>
    
                        <div class="inline p-3 text-blue-800">
                            <a
                                :href="item.imageSrc"
                                :title="`View ${item.heading}`"
                            >View</a>
                        </div>

                    </div>
        
        
                    <br>
                    <br>
                    <br>
                </div>
            </section>

        </main>

    </div>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-28434239-20"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-28434239-20');
    </script>

    <!--   Vue   -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    
    <!--   Clipboard   -->
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    
    
    <!--   Main   -->
    <script type="text/javascript">

        var app = new Vue({
            el: '#app',
            data: {
                vimeoId: '358629078',
                exampleVideos: [
                    {
                        label: 'Dad Life',
                        id: '12714406'
                    },
                    {
                        label: 'City Limits',
                        id: '23237102'
                    },
                    {
                        label: 'Girl Walk',
                        id: '32845443'
                    }
                ],
                items: [
                    {
                        heading: 'JPG Example',
                        id: 'regular-image',
                        imageSrcTemplate: `/{vimeoId}.jpg`,
                        imageAlt: 'Regular Thumbnail Example',
                        width: 640
                    },
                    {
                        heading: 'JPG Large Example',
                        id: 'large-image',
                        imageSrcTemplate: `/{vimeoId}_large.jpg`,
                        imageAlt: 'Large Thumbnail Example',
                        width: 640
                    },
                    {
                        heading: 'JPG Medium Example',
                        id: 'medium-image',
                        imageSrcTemplate: `/{vimeoId}_medium.jpg`,
                        imageAlt: 'Medium Thumbnail Example',
                        width: 200
                    },
                    {
                        heading: 'JPG Small Example',
                        id: 'small-image',
                        imageSrcTemplate: `/{vimeoId}_small.jpg`,
                        imageAlt: 'Small Thumbnail Example',
                        width: 100
                    }
                ]
            },
            computed: {
                domain () {
                    return `${window.location.protocol}//${window.location.host}`
                },
                mappedItems () {
                    return this.items.map(item => {
                        // console.log('item', item)
                        // console.log('item.imageSrcTemplate', item.imageSrcTemplate)

                        item.imageSrc = `${window.location.protocol}//${window.location.host}` + item.imageSrcTemplate.replace('{vimeoId}', this.vimeoId)

                        return item
                    })
                },
                imageHtml () {
                    const src = this.mappedItems[0].imageSrc
                    const srcset = this.mappedItems.map(({ imageSrc, width }) => `${imageSrc} ${width}w`).join(', ')

                    // console.log('srcset', srcset)

                    return `
                        <img
                            srcset="${srcset}"
                            sizes="(max-width: 640px) 100vw, 640px"
                            src="${src}"
                            alt="Vimeo Thumbnail"
                        />
                    `
                }
            },
            methods: {
                // copyImageUrl ( event ) {
                //     const { copyUrl } = event.target.dataset

                //     console.log('Copying', copyUrl)
                //     const clipboard = new ClipboardJS(event.target, {
                //         // text: (trigger) => {
                //         //     return copyUrl
                //         // }
                //     })

                //     // clipboard.target(event.target)

                //     clipboard.action('copy')

                //     console.log('clipboard', clipboard)

                // }
            },
            mounted () {
                // This may break on the next render
                new ClipboardJS('.copy')
            }
        });
    
    </script>
    
</body>
</html>
